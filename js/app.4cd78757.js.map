{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/esptool/utils/unpack.ts","webpack:///./src/esptool/utils/serial.ts","webpack:///./src/esptool/utils/once.ts","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/esptool/utils/sleep.ts","webpack:///./src/esptool/utils/hex.ts","webpack:///./src/esptool/ESP32ROM.ts","webpack:///./src/unpack/unzip.ts","webpack:///./src/esptool/ESPLoader.ts","webpack:///./src/App.vue?eb5e","webpack:///./src/esptool/stubs/ESP8266Stub.ts","webpack:///./src/esptool/ESP8266ROM.ts","webpack:///./src/esptool/ESPTool.ts","webpack:///./src/esptool/index.ts","webpack:///./src/App.vue","webpack:///./src/App.vue?0ab4","webpack:///./src/App.vue?bff9","webpack:///./src/main.ts","webpack:///./src/esptool/stubs/ESP32Stub.ts","webpack:///./src/esptool/utils/pack.ts","webpack:///./src/unpack/index.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","unpack","queue","Buffer","concat","packets","pi","qi","packet","alloc","from","open","serial","close","closeGracefully","set","options","update","once","emitter","evt","timeout","Promise","resolve","reject","listener","ret","clearTimeout","timer","setTimeout","removeListener","Error","map","webpackContext","req","id","webpackContextResolve","e","code","keys","sleep","hex","v","bytes","toString","padStart","ESP32ROM","ESP32StubLoader","this","read_reg","EFUSE_RD_REG_BASE","read_efuse","word3","word5","DR_REG_SYSCON_BASE","apb_ctl_date","rev_bit0","rev_bit1","rev_bit2","get_pkg_version","pkg_version","get_chip_revision","chip_revision","rev3","single_core","chip_name","0","1","2","4","5","6","startsWith","hspi_arg","writeUInt32LE","command","ESP_SPI_ATTACH","check","fromBuffer","readEntry","zip","onEntry","entry","onEnd","unzip","file","arrayBuffer","buffer","lazyEntries","openReadStream","entries","fileName","endsWith","stream","spoon","setImmediate","process","nextTick","unzipAsync","ESPLoader","port","_on_data","on","_trace","TRACE","text","console","log","_dispatch","write","op","size","readUInt16LE","val","readUInt32LE","emit","chk","tries","hdr","writeUInt16LE","out","_write","STATUS_BYTES_LENGTH","status_bytes","ESP_SYNC","esp32r0_delay","dtr","rts","sync","attempts","_connect_attempt","addr","ESP_READ_REG","offset","state","ESP_CHECKSUM_MAGIC","b","blocks","blocksize","ESP_MEM_BEGIN","seq","buf","ESP_MEM_DATA","_checksum","entrypoint","ESP_MEM_END","num_blocks","Math","floor","FLASH_WRITE_SIZE","erase_size","get_erase_size","ESP_FLASH_BEGIN","ESP_FLASH_DATA","reboot","ESP_FLASH_END","alignment","pad_character","pad_mod","arg","FLASH_SIZES","sizes","join","stub","STUB_CODE","field","offs","ESP_RAM_BLOCK","mem_begin","from_offs","to_offs","mem_block","mem_finish","STUB_CLASS","baud","IS_STUB","baudRate","ESP_CHANGE_BAUDRATE","address","args","image","BOOTLOADER_FLASH_OFFSET","magic","flash_mode","flash_freq","flash_size","ESP_IMAGE_MAGIC","warn","flashMode","flashFreq","flashSize","_parse_flash_size_arg","onProgress","partitions","_pad_image","_update_image_flash_params","flash_begin","written","round","block","flash_block","index","blocks_written","blocks_total","CHIP_DETECT_MAGIC_REG_ADDR","flash_finish","_vm","_h","$createElement","_c","_self","attrs","_v","staticClass","progress","ref","handleFile","_s","_e","formatProgress","busy","start","_m","staticRenderFns","ESP8266Stub","efuses","r0_4","r3_25","r3_26","r3_27","get_efuses","_get_flash_size","max_temp","sectors_per_block","sector_size","FLASH_SECTOR_SIZE","num_sectors","start_sector","head_sectors","Binding","path","isOpen","autoOpen","detector","connect","chip_magic_value","cls","CHIP_DETECT_MAGIC_VALUE","loader","release","get_chip_description","chip_description","run_stub","flash_spi_attach","flash","hard_reset","MAX_FILE_SIZE","hackWSABinding","navigator","getPorts","internalBasePortsList","esp","$message","success","imageSizes","imageSizesTotal","error","flashArgs","reduce","total","component","config","productionTip","use","render","h","$mount","pack","oi","di","findFlashArgs","dir","content","replace","split","trim","filter","match","parseInt","RegExp","$1"],"mappings":"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","file":"js/app.4cd78757.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","export default function unpack(queue: Buffer, data: Buffer): { queue: Buffer, packets: Buffer[] } {\n  queue = Buffer.concat([queue, data]);\n  const packets = [];\n  let pi = 0, qi = 0;\n  let packet = null;\n  while (qi < queue.length) {\n    if (queue[qi] == 0xC0) {\n      if (packet == null) {  // start\n        packet = Buffer.alloc(queue.length);\n      } else {  // end\n        packets.push(packet.slice(0, pi));\n        packet = null;\n        pi = 0;\n      }\n      qi += 1;\n    } else if (qi < queue.length - 1 && queue[qi] == 0xDB && queue[qi + 1] == 0xDC) {\n      if (packet != null) {\n        packet[pi] = 0xC0;\n        pi += 1;\n      }\n      qi += 2;\n    } else if (qi < queue.length - 1 && queue[qi] == 0xDB && queue[qi + 1] == 0xDD) {\n      if (packet != null) {\n        packet[pi] = 0xDB;\n        pi += 1;\n      }\n      qi += 2;\n    } else {\n      if (packet != null) {\n        packet[pi] = queue[qi];\n        pi += 1;\n      }\n      qi += 1;\n    }\n  }\n  if (packet != null) {\n    packet = Buffer.concat([Buffer.from([0xC0]), packet.slice(0, pi)]);\n  } else {\n    packet = Buffer.alloc(0);\n  }\n  return { queue: packet, packets };\n}\n","import SerialPort from '@serialport/stream';\nimport { promisify } from 'util';\n\nexport function open(serial: SerialPort): Promise<void> {\n  return promisify(serial.open.bind(serial))();\n}\n\nexport function close(serial: SerialPort): Promise<void> {\n  return promisify(serial.close.bind(serial))();\n}\n\nexport async function closeGracefully(serial: SerialPort): Promise<void> {\n  try {\n    await close(serial);\n  } catch (e) {\n    // ignored\n  }\n}\n\nexport function set(serial: SerialPort, options: SerialPort.SetOptions): Promise<void> {\n  return promisify(serial.set.bind(serial))(options);\n}\n\nexport function update(serial: SerialPort, options: SerialPort.UpdateOptions): Promise<void> {\n  return promisify(serial.update.bind(serial))(options);\n}\n","import EventEmitter from 'events';\n\nexport default async function once<T>(emitter: EventEmitter, evt: string, timeout: number): Promise<T> {\n  return new Promise((resolve, reject) => {\n    const listener = (ret: T) => {\n      clearTimeout(timer);\n      resolve(ret);\n    };\n\n    const timer = setTimeout(() => {\n      emitter.removeListener(evt, listener);\n      reject(new Error('Timeout'));\n    }, timeout);\n\n    emitter.once(evt, listener);\n  });\n\n}\n","var map = {\n\t\"./af\": \"2bfb\",\n\t\"./af.js\": \"2bfb\",\n\t\"./ar\": \"8e73\",\n\t\"./ar-dz\": \"a356\",\n\t\"./ar-dz.js\": \"a356\",\n\t\"./ar-kw\": \"423e\",\n\t\"./ar-kw.js\": \"423e\",\n\t\"./ar-ly\": \"1cfd\",\n\t\"./ar-ly.js\": \"1cfd\",\n\t\"./ar-ma\": \"0a84\",\n\t\"./ar-ma.js\": \"0a84\",\n\t\"./ar-sa\": \"8230\",\n\t\"./ar-sa.js\": \"8230\",\n\t\"./ar-tn\": \"6d83\",\n\t\"./ar-tn.js\": \"6d83\",\n\t\"./ar.js\": \"8e73\",\n\t\"./az\": \"485c\",\n\t\"./az.js\": \"485c\",\n\t\"./be\": \"1fc1\",\n\t\"./be.js\": \"1fc1\",\n\t\"./bg\": \"84aa\",\n\t\"./bg.js\": \"84aa\",\n\t\"./bm\": \"a7fa\",\n\t\"./bm.js\": \"a7fa\",\n\t\"./bn\": \"9043\",\n\t\"./bn-bd\": \"9686\",\n\t\"./bn-bd.js\": \"9686\",\n\t\"./bn.js\": \"9043\",\n\t\"./bo\": \"d26a\",\n\t\"./bo.js\": \"d26a\",\n\t\"./br\": \"6887\",\n\t\"./br.js\": \"6887\",\n\t\"./bs\": \"2554\",\n\t\"./bs.js\": \"2554\",\n\t\"./ca\": \"d716\",\n\t\"./ca.js\": \"d716\",\n\t\"./cs\": \"3c0d\",\n\t\"./cs.js\": \"3c0d\",\n\t\"./cv\": \"03ec\",\n\t\"./cv.js\": \"03ec\",\n\t\"./cy\": \"9797\",\n\t\"./cy.js\": \"9797\",\n\t\"./da\": \"0f14\",\n\t\"./da.js\": \"0f14\",\n\t\"./de\": \"b469\",\n\t\"./de-at\": \"b3eb\",\n\t\"./de-at.js\": \"b3eb\",\n\t\"./de-ch\": \"bb71\",\n\t\"./de-ch.js\": \"bb71\",\n\t\"./de.js\": \"b469\",\n\t\"./dv\": \"598a\",\n\t\"./dv.js\": \"598a\",\n\t\"./el\": \"8d47\",\n\t\"./el.js\": \"8d47\",\n\t\"./en-au\": \"0e6b\",\n\t\"./en-au.js\": \"0e6b\",\n\t\"./en-ca\": \"3886\",\n\t\"./en-ca.js\": \"3886\",\n\t\"./en-gb\": \"39a6\",\n\t\"./en-gb.js\": \"39a6\",\n\t\"./en-ie\": \"e1d3\",\n\t\"./en-ie.js\": \"e1d3\",\n\t\"./en-il\": \"7333\",\n\t\"./en-il.js\": \"7333\",\n\t\"./en-in\": \"ec2e\",\n\t\"./en-in.js\": \"ec2e\",\n\t\"./en-nz\": \"6f50\",\n\t\"./en-nz.js\": \"6f50\",\n\t\"./en-sg\": \"b7e9\",\n\t\"./en-sg.js\": \"b7e9\",\n\t\"./eo\": \"65db\",\n\t\"./eo.js\": \"65db\",\n\t\"./es\": \"898b\",\n\t\"./es-do\": \"0a3c\",\n\t\"./es-do.js\": \"0a3c\",\n\t\"./es-mx\": \"b5b7\",\n\t\"./es-mx.js\": \"b5b7\",\n\t\"./es-us\": \"55c9\",\n\t\"./es-us.js\": \"55c9\",\n\t\"./es.js\": \"898b\",\n\t\"./et\": \"ec18\",\n\t\"./et.js\": \"ec18\",\n\t\"./eu\": \"0ff2\",\n\t\"./eu.js\": \"0ff2\",\n\t\"./fa\": \"8df4\",\n\t\"./fa.js\": \"8df4\",\n\t\"./fi\": \"81e9\",\n\t\"./fi.js\": \"81e9\",\n\t\"./fil\": \"d69a\",\n\t\"./fil.js\": \"d69a\",\n\t\"./fo\": \"0721\",\n\t\"./fo.js\": \"0721\",\n\t\"./fr\": \"9f26\",\n\t\"./fr-ca\": \"d9f8\",\n\t\"./fr-ca.js\": \"d9f8\",\n\t\"./fr-ch\": \"0e49\",\n\t\"./fr-ch.js\": \"0e49\",\n\t\"./fr.js\": \"9f26\",\n\t\"./fy\": \"7118\",\n\t\"./fy.js\": \"7118\",\n\t\"./ga\": \"5120\",\n\t\"./ga.js\": \"5120\",\n\t\"./gd\": \"f6b4\",\n\t\"./gd.js\": \"f6b4\",\n\t\"./gl\": \"8840\",\n\t\"./gl.js\": \"8840\",\n\t\"./gom-deva\": \"aaf2\",\n\t\"./gom-deva.js\": \"aaf2\",\n\t\"./gom-latn\": \"0caa\",\n\t\"./gom-latn.js\": \"0caa\",\n\t\"./gu\": \"e0c5\",\n\t\"./gu.js\": \"e0c5\",\n\t\"./he\": \"c7aa\",\n\t\"./he.js\": \"c7aa\",\n\t\"./hi\": \"dc4d\",\n\t\"./hi.js\": \"dc4d\",\n\t\"./hr\": \"4ba9\",\n\t\"./hr.js\": \"4ba9\",\n\t\"./hu\": \"5b14\",\n\t\"./hu.js\": \"5b14\",\n\t\"./hy-am\": \"d6b6\",\n\t\"./hy-am.js\": \"d6b6\",\n\t\"./id\": \"5038\",\n\t\"./id.js\": \"5038\",\n\t\"./is\": \"0558\",\n\t\"./is.js\": \"0558\",\n\t\"./it\": \"6e98\",\n\t\"./it-ch\": \"6f12\",\n\t\"./it-ch.js\": \"6f12\",\n\t\"./it.js\": \"6e98\",\n\t\"./ja\": \"079e\",\n\t\"./ja.js\": \"079e\",\n\t\"./jv\": \"b540\",\n\t\"./jv.js\": \"b540\",\n\t\"./ka\": \"201b\",\n\t\"./ka.js\": \"201b\",\n\t\"./kk\": \"6d79\",\n\t\"./kk.js\": \"6d79\",\n\t\"./km\": \"e81d\",\n\t\"./km.js\": \"e81d\",\n\t\"./kn\": \"3e92\",\n\t\"./kn.js\": \"3e92\",\n\t\"./ko\": \"22f8\",\n\t\"./ko.js\": \"22f8\",\n\t\"./ku\": \"2421\",\n\t\"./ku.js\": \"2421\",\n\t\"./ky\": \"9609\",\n\t\"./ky.js\": \"9609\",\n\t\"./lb\": \"440c\",\n\t\"./lb.js\": \"440c\",\n\t\"./lo\": \"b29d\",\n\t\"./lo.js\": \"b29d\",\n\t\"./lt\": \"26f9\",\n\t\"./lt.js\": \"26f9\",\n\t\"./lv\": \"b97c\",\n\t\"./lv.js\": \"b97c\",\n\t\"./me\": \"293c\",\n\t\"./me.js\": \"293c\",\n\t\"./mi\": \"688b\",\n\t\"./mi.js\": \"688b\",\n\t\"./mk\": \"6909\",\n\t\"./mk.js\": \"6909\",\n\t\"./ml\": \"02fb\",\n\t\"./ml.js\": \"02fb\",\n\t\"./mn\": \"958b\",\n\t\"./mn.js\": \"958b\",\n\t\"./mr\": \"39bd\",\n\t\"./mr.js\": \"39bd\",\n\t\"./ms\": \"ebe4\",\n\t\"./ms-my\": \"6403\",\n\t\"./ms-my.js\": \"6403\",\n\t\"./ms.js\": \"ebe4\",\n\t\"./mt\": \"1b45\",\n\t\"./mt.js\": \"1b45\",\n\t\"./my\": \"8689\",\n\t\"./my.js\": \"8689\",\n\t\"./nb\": \"6ce3\",\n\t\"./nb.js\": \"6ce3\",\n\t\"./ne\": \"3a39\",\n\t\"./ne.js\": \"3a39\",\n\t\"./nl\": \"facd\",\n\t\"./nl-be\": \"db29\",\n\t\"./nl-be.js\": \"db29\",\n\t\"./nl.js\": \"facd\",\n\t\"./nn\": \"b84c\",\n\t\"./nn.js\": \"b84c\",\n\t\"./oc-lnc\": \"167b\",\n\t\"./oc-lnc.js\": \"167b\",\n\t\"./pa-in\": \"f3ff\",\n\t\"./pa-in.js\": \"f3ff\",\n\t\"./pl\": \"8d57\",\n\t\"./pl.js\": \"8d57\",\n\t\"./pt\": \"f260\",\n\t\"./pt-br\": \"d2d4\",\n\t\"./pt-br.js\": \"d2d4\",\n\t\"./pt.js\": \"f260\",\n\t\"./ro\": \"972c\",\n\t\"./ro.js\": \"972c\",\n\t\"./ru\": \"957c\",\n\t\"./ru.js\": \"957c\",\n\t\"./sd\": \"6784\",\n\t\"./sd.js\": \"6784\",\n\t\"./se\": \"ffff\",\n\t\"./se.js\": \"ffff\",\n\t\"./si\": \"eda5\",\n\t\"./si.js\": \"eda5\",\n\t\"./sk\": \"7be6\",\n\t\"./sk.js\": \"7be6\",\n\t\"./sl\": \"8155\",\n\t\"./sl.js\": \"8155\",\n\t\"./sq\": \"c8f3\",\n\t\"./sq.js\": \"c8f3\",\n\t\"./sr\": \"cf1e\",\n\t\"./sr-cyrl\": \"13e9\",\n\t\"./sr-cyrl.js\": \"13e9\",\n\t\"./sr.js\": \"cf1e\",\n\t\"./ss\": \"52bd\",\n\t\"./ss.js\": \"52bd\",\n\t\"./sv\": \"5fbd\",\n\t\"./sv.js\": \"5fbd\",\n\t\"./sw\": \"74dc\",\n\t\"./sw.js\": \"74dc\",\n\t\"./ta\": \"3de5\",\n\t\"./ta.js\": \"3de5\",\n\t\"./te\": \"5cbb\",\n\t\"./te.js\": \"5cbb\",\n\t\"./tet\": \"576c\",\n\t\"./tet.js\": \"576c\",\n\t\"./tg\": \"3b1b\",\n\t\"./tg.js\": \"3b1b\",\n\t\"./th\": \"10e8\",\n\t\"./th.js\": \"10e8\",\n\t\"./tk\": \"5aff\",\n\t\"./tk.js\": \"5aff\",\n\t\"./tl-ph\": \"0f38\",\n\t\"./tl-ph.js\": \"0f38\",\n\t\"./tlh\": \"cf75\",\n\t\"./tlh.js\": \"cf75\",\n\t\"./tr\": \"0e81\",\n\t\"./tr.js\": \"0e81\",\n\t\"./tzl\": \"cf51\",\n\t\"./tzl.js\": \"cf51\",\n\t\"./tzm\": \"c109\",\n\t\"./tzm-latn\": \"b53d\",\n\t\"./tzm-latn.js\": \"b53d\",\n\t\"./tzm.js\": \"c109\",\n\t\"./ug-cn\": \"6117\",\n\t\"./ug-cn.js\": \"6117\",\n\t\"./uk\": \"ada2\",\n\t\"./uk.js\": \"ada2\",\n\t\"./ur\": \"5294\",\n\t\"./ur.js\": \"5294\",\n\t\"./uz\": \"2e8c\",\n\t\"./uz-latn\": \"010e\",\n\t\"./uz-latn.js\": \"010e\",\n\t\"./uz.js\": \"2e8c\",\n\t\"./vi\": \"2921\",\n\t\"./vi.js\": \"2921\",\n\t\"./x-pseudo\": \"fd7e\",\n\t\"./x-pseudo.js\": \"fd7e\",\n\t\"./yo\": \"7f33\",\n\t\"./yo.js\": \"7f33\",\n\t\"./zh-cn\": \"5c3a\",\n\t\"./zh-cn.js\": \"5c3a\",\n\t\"./zh-hk\": \"49ab\",\n\t\"./zh-hk.js\": \"49ab\",\n\t\"./zh-mo\": \"3a6c\",\n\t\"./zh-mo.js\": \"3a6c\",\n\t\"./zh-tw\": \"90ea\",\n\t\"./zh-tw.js\": \"90ea\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"4678\";","export default function sleep(timeout: number): Promise<void> {\n  return new Promise((resolve) => setTimeout(resolve, timeout));\n}\n","export default function hex(v: number, bytes = 1): string {\n  return `0x${v.toString(16).padStart(bytes * 2, '0')}`;\n}\n","import ESPLoader from './ESPLoader';\nimport ESP32Stub from './stubs/ESP32Stub';\n\nexport default class ESP32ROM extends ESPLoader {\n\n  static CHIP_DETECT_MAGIC_VALUE = 0x00f01d83;\n\n  CHIP_NAME = 'ESP32';\n  IS_STUB = false;\n\n  // ESP32 uses a 4 byte status reply\n  STATUS_BYTES_LENGTH = 4;\n\n  EFUSE_RD_REG_BASE = 0x3ff5a000;\n\n  DR_REG_SYSCON_BASE = 0x3ff66000;\n\n  FLASH_SIZES = {\n    '1MB': 0x00,\n    '2MB': 0x10,\n    '4MB': 0x20,\n    '8MB': 0x30,\n    '16MB': 0x40,\n  };\n\n  BOOTLOADER_FLASH_OFFSET = 0x1000;\n\n  STUB_CLASS = ESP32StubLoader;\n  STUB_CODE = ESP32Stub;\n\n  async read_efuse(n: number): Promise<number> {\n    return await this.read_reg(this.EFUSE_RD_REG_BASE + (4 * n));\n  }\n\n  async get_pkg_version(): Promise<number> {\n    const word3 = await this.read_efuse(3);\n    return ((word3 >> 9) & 0x07) + (((word3 >> 2) & 0x1) << 3);\n  }\n\n  async get_chip_revision(): Promise<number> {\n    const word3 = await this.read_efuse(3);\n    const word5 = await this.read_efuse(5);\n    const apb_ctl_date = await this.read_reg(this.DR_REG_SYSCON_BASE + 0x7C);\n\n    const rev_bit0 = (word3 >> 15) & 0x1\n    const rev_bit1 = (word5 >> 20) & 0x1\n    const rev_bit2 = (apb_ctl_date >> 31) & 0x1\n\n    if (!rev_bit0) return 0;\n    if (!rev_bit1) return 1;\n    if (!rev_bit2) return 2;\n    return 3;\n  }\n\n  async get_chip_description(): Promise<string> {\n    const pkg_version = await this.get_pkg_version();\n    const chip_revision = await this.get_chip_revision();\n    const rev3 = (chip_revision == 3);\n    const single_core = (await this.read_efuse(3)) & (1 << 0); // CHIP_VER DIS_APP_CPU\n\n    let chip_name = {\n      0: single_core ? 'ESP32-S0WDQ6' : 'ESP32-D0WDQ6',\n      1: single_core ? 'ESP32-S0WD' : 'ESP32-D0WD',\n      2: 'ESP32-D2WD',\n      4: 'ESP32-U4WDH',\n      5: rev3 ? 'ESP32-PICO-V3' : 'ESP32-PICO-D4',\n      6: 'ESP32-PICO-V3-02',\n    }[pkg_version] || 'unknown ESP32';\n\n    if (chip_name.startsWith('ESP32-D0WD') && rev3) {\n      chip_name += '-V3';\n    }\n\n    return `${chip_name} (revision ${chip_revision})`;\n  }\n\n  async flash_spi_attach(hspi_arg: number): Promise<void> {\n    const data = Buffer.alloc(8);\n    data.writeUInt32LE(hspi_arg, 0);\n    data.writeUInt32LE(0, 4);\n    this.check(await this.command(this.ESP_SPI_ATTACH, data));\n  }\n\n}\n\nclass ESP32StubLoader extends ESP32ROM {\n\n  FLASH_WRITE_SIZE = 0x4000;  // matches MAX_WRITE_BLOCK in stub_loader.c\n  STATUS_BYTES_LENGTH = 2;  // same as ESP8266, different to ESP32 ROM\n  IS_STUB = true;\n\n  async flash_spi_attach(hspi_arg: number): Promise<void> {\n    const data = Buffer.alloc(4);\n    data.writeUInt32LE(hspi_arg, 0);\n    this.check(await this.command(this.ESP_SPI_ATTACH, data));\n  }\n\n}\n","import { promisify } from 'util';\nimport yauzl, { Entry, Options, ZipFile } from 'yauzl';\nimport pond from 'pond';\n\nconst fromBuffer = promisify(yauzl.fromBuffer) as\n  (buffer: Buffer, options?: Options) => Promise<ZipFile>;\n\n// Hack yauzl\n// @ts-ignore\nwindow.setImmediate = process.nextTick;\n\nfunction readEntry(zip: ZipFile): Promise<Entry | null> {\n  return new Promise((resolve) => {\n    const onEntry = (entry: Entry) => {\n      zip.removeListener('end', onEnd);\n      resolve(entry);\n    };\n\n    const onEnd = () => {\n      zip.removeListener('entry', onEntry);\n      resolve(null);\n    };\n\n    zip.once('entry', onEntry);\n    zip.once('end', onEnd);\n    zip.readEntry();\n  });\n}\n\nexport default async function unzip(file: File): Promise<Record<string, Buffer>> {\n  const buffer = Buffer.from(await file.arrayBuffer());\n  const zip = await fromBuffer(buffer, { lazyEntries: true });\n  const openReadStream = promisify(zip.openReadStream.bind(zip));\n\n  const entries: Record<string, Buffer> = {};\n  let entry;\n  while ((entry = await readEntry(zip)) != null) {\n    if (entry.fileName.endsWith('/')) {\n      continue;\n    }\n\n    const stream = await openReadStream(entry);\n    entries[`/${entry.fileName}`] = await pond(stream).spoon();\n  }\n\n  return entries;\n}\n","import { promisify } from 'util';\nimport { unzip } from 'zlib';\nimport SerialPort from '@serialport/stream';\nimport hex from './utils/hex';\nimport once from './utils/once';\nimport sleep from './utils/sleep';\nimport pack from './utils/pack';\nimport unpack from './utils/unpack';\nimport { set, update } from './utils/serial';\nimport { IFlashArgs } from './';\n\nconst unzipAsync = promisify(unzip);\n\ninterface IResponse {\n  val: number;\n  data: Buffer;\n}\n\nexport interface IStub {\n  text: string;\n  text_start: number;\n  entry: number;\n  data: string;\n  data_start: number;\n}\n\nexport interface IFlashProgress {\n  index: number;\n  blocks_written: number;\n  blocks_total: number;\n}\n\nexport default class ESPLoader {\n\n  static TRACE = false;\n\n  // This ROM address has a different value on each chip model\n  static CHIP_DETECT_MAGIC_REG_ADDR = 0x40001000;\n\n  CHIP_NAME = 'Espressif device';\n  IS_STUB = false;\n\n  // Commands supported by ESP8266 ROM bootloader\n  ESP_FLASH_BEGIN = 0x02;\n  ESP_FLASH_DATA = 0x03;\n  ESP_FLASH_END = 0x04;\n  ESP_MEM_BEGIN = 0x05;\n  ESP_MEM_END = 0x06;\n  ESP_MEM_DATA = 0x07;\n  ESP_SYNC = 0x08;\n  ESP_READ_REG = 0x0A;\n\n  // Some comands supported by ESP32 ROM bootloader(or -8266 w / stub)\n  ESP_SPI_ATTACH = 0x0D;\n  ESP_CHANGE_BAUDRATE = 0x0F;\n\n  // Maximum block sized for RAM and Flash writes, respectively.\n  ESP_RAM_BLOCK = 0x1800;\n\n  FLASH_WRITE_SIZE = 0x400;\n\n  //First byte of the application image\n  ESP_IMAGE_MAGIC = 0xe9;\n\n  // Initial state for the checksum routine\n  ESP_CHECKSUM_MAGIC = 0xef;\n\n  // Flash sector size, minimum unit of erase.\n  FLASH_SECTOR_SIZE = 0x1000;\n\n  // The number of bytes in the UART response that signify command status\n  STATUS_BYTES_LENGTH = 2;\n\n  BOOTLOADER_FLASH_OFFSET = 0;\n  FLASH_SIZES: Record<string, number> = {};\n\n  port: SerialPort;\n  queue: Buffer;\n\n  STUB_CODE?: IStub;\n  STUB_CLASS?: { new(port: SerialPort): ESPLoader };\n\n  private _trace: (text?: string) => void;\n\n  constructor(port: SerialPort) {\n    this._on_data = this._on_data.bind(this);\n\n    this.port = port;\n    this.port.on('data', this._on_data);\n\n    this.queue = Buffer.alloc(0);\n\n    this._trace = ESPLoader.TRACE\n      ? (text) => console.log(`%cTRACE ${text}`, 'color: darkcyan')\n      : () => null;\n  }\n\n  release(): void {\n    this.port.removeListener('data', this._on_data);\n  }\n\n  _on_data(data: Buffer): void {\n    this._trace(`Read ${data.length} bytes: ${data.toString('hex')}`);\n    const { queue, packets } = unpack(this.queue, data);\n    this.queue = queue;\n    for (const packet of packets) {\n      this._dispatch(packet);\n    }\n  }\n\n  _write(data: Buffer): void {\n    data = pack(data);\n    this._trace(`Write ${data.length} bytes: ${data.toString('hex')}`);\n    this.port.write(data);\n  }\n\n  _dispatch(data: Buffer): void {\n    if (data.length < 8) return;\n    if (data[0] != 0x01) return;\n    const op = data[1];\n    const size = data.readUInt16LE(2);\n    const val = data.readUInt32LE(4);\n    data = data.slice(8);\n\n    this._trace(`< res op=${hex(op)} len=${size} val=${val} data=${data.toString('hex')}`);\n\n    this.port.emit(`res:${op}`, { val, data } as IResponse);\n  }\n\n  async command(op: number, data: Buffer, chk = 0, timeout = 500, tries = 5): Promise<IResponse> {\n    this._trace(`> req op=${hex(op)} len=${data.length} data=${data.toString('hex')}`);\n\n    const hdr = Buffer.alloc(8);\n    hdr[0] = 0x00;\n    hdr[1] = op;\n    hdr.writeUInt16LE(data.length, 2);\n    hdr.writeUInt32LE(chk, 4);\n    const out = Buffer.concat([hdr, data]);\n    for (let i = 0; i < tries; i++) {\n      try {\n        this._write(out);\n        return await once(this.port, `res:${op}`, timeout) as IResponse;\n      } catch (e) {\n        // ignored\n      }\n    }\n    throw new Error('Timeout waiting for command response');\n  }\n\n  check({ val, data }: IResponse): number | Buffer {\n    if (data.length < this.STATUS_BYTES_LENGTH) {\n      throw new Error(`Only got ${data.length} byte status response.`);\n    }\n\n    const status_bytes = data.slice(0, this.STATUS_BYTES_LENGTH);\n    if (status_bytes[0] != 0) {\n      throw new Error(`Command failed: ${status_bytes.toString('hex')}`);\n    }\n\n    // if we had more data than just the status bytes, return it as the result\n    // (this is used by the md5sum command, maybe other commands ?)\n    if (data.length > this.STATUS_BYTES_LENGTH) {\n      return data.slice(this.STATUS_BYTES_LENGTH);\n    } else {\n      // otherwise, just return the 'val' field which comes from the reply header(this is used by read_reg)\n      return val;\n    }\n  }\n\n  async sync(): Promise<number> {\n    const data = Buffer.concat([\n      Buffer.from([0x07, 0x07, 0x12, 0x20]),\n      Buffer.alloc(32, 0x55),\n    ]);\n    const { val } = await this.command(this.ESP_SYNC, data);\n    return val;\n  }\n\n  async _connect_attempt(esp32r0_delay = false): Promise<boolean> {\n    // esp32r0_delay is a workaround for bugs with the most common auto reset\n    // circuit and Windows, if the EN pin on the dev board does not have\n    // enough capacitance.\n    //\n    // Newer dev boards shouldn't have this problem (higher value capacitor\n    // on the EN pin), and ESP32 revision 1 can't use this workaround as it\n    // relies on a silicon bug.\n    //\n    // Details: https://github.com/espressif/esptool/issues/136\n\n    // IO0 = HIGH\n    // EN = LOW, chip in reset\n    await set(this.port, { dtr: false, rts: true });\n\n    await sleep(100);\n    if (esp32r0_delay) {\n      // Some chips are more likely to trigger the esp32r0\n      // watchdog reset silicon bug if they're held with EN=LOW\n      // for a longer period\n      await sleep(1200);\n    }\n\n    // IO0 = LOW\n    // EN = HIGH, chip out of reset\n    await set(this.port, { dtr: true, rts: false });\n\n    if (esp32r0_delay) {\n      // Sleep longer after reset.\n      // This workaround only works on revision 0 ESP32 chips,\n      // it exploits a silicon bug spurious watchdog reset.\n      await sleep(400);  // allow watchdog reset to occur\n    }\n    await sleep(50);\n\n    // IO0 = HIGH, done\n    await set(this.port, { dtr: false, rts: false });\n\n    for (let i = 0; i < 5; i++) {\n      try {\n        await this.sync();\n        return true;\n      } catch (e) {\n        await sleep(50);\n      }\n    }\n\n    return false;\n  }\n\n  async connect(attempts = 7): Promise<boolean> {\n    for (let i = 0; i < attempts; i++) {\n      try {\n        if (await this._connect_attempt(false)) {\n          return true;\n        } else if (await this._connect_attempt(true)) {\n          return true;\n        }\n      } catch (e) {\n        // ignored\n      }\n    }\n\n    return false;\n  }\n\n  async read_reg(addr: number): Promise<number> {\n    const data = Buffer.alloc(4);\n    data.writeUInt32LE(addr, 0);\n    const { val } = await this.command(this.ESP_READ_REG, data);\n    return val;\n  }\n\n  async get_chip_description(): Promise<string> {\n    throw new Error('Not supported');\n  }\n\n  get_erase_size(offset: number, size: number): number {\n    return size;\n  }\n\n  async flash_spi_attach(hspi_arg: number): Promise<void> {\n    hspi_arg;\n    throw new Error('Not supported');\n  }\n\n  _checksum(data: Buffer): number {\n    let state = this.ESP_CHECKSUM_MAGIC;\n    for (const b of data) {\n      state ^= b;\n    }\n    return state;\n  }\n\n  async mem_begin(size: number, blocks: number, blocksize: number, offset: number): Promise<void> {\n    const data = Buffer.alloc(16);\n    data.writeUInt32LE(size, 0);\n    data.writeUInt32LE(blocks, 4);\n    data.writeUInt32LE(blocksize, 8);\n    data.writeUInt32LE(offset, 12);\n\n    this.check(await this.command(this.ESP_MEM_BEGIN, data, 0, 5000, 1));\n  }\n\n  async mem_block(data: Buffer, seq: number): Promise<void> {\n    const hdr = Buffer.alloc(16);\n    hdr.writeUInt32LE(data.length, 0);\n    hdr.writeUInt32LE(seq, 4);\n    hdr.writeUInt32LE(0, 8);\n    hdr.writeUInt32LE(0, 12);\n\n    const buf = Buffer.concat([hdr, data]);\n    this.check(await this.command(this.ESP_MEM_DATA, buf, this._checksum(data), 5000, 1));\n  }\n\n  async mem_finish(entrypoint = 0): Promise<void> {\n    const data = Buffer.alloc(8);\n    data.writeUInt32LE(entrypoint == 0 ? 1 : 0, 0);\n    data.writeUInt32LE(entrypoint, 4);\n    this.check(await this.command(this.ESP_MEM_END, data, 0, 50, 1));\n  }\n\n  async flash_begin(size: number, offset: number): Promise<number> {\n    const num_blocks = Math.floor((size + this.FLASH_WRITE_SIZE - 1) / this.FLASH_WRITE_SIZE);\n    const erase_size = this.get_erase_size(offset, size);\n\n    const data = Buffer.alloc(16);\n    data.writeUInt32LE(erase_size, 0);\n    data.writeUInt32LE(num_blocks, 4);\n    data.writeUInt32LE(this.FLASH_WRITE_SIZE, 8);\n    data.writeUInt32LE(offset, 12);\n\n    this.check(await this.command(this.ESP_FLASH_BEGIN, data, 0, 5000, 1));\n\n    return num_blocks;\n  }\n\n  async flash_block(data: Buffer, seq: number): Promise<void> {\n    const hdr = Buffer.alloc(16);\n    hdr.writeUInt32LE(data.length, 0);\n    hdr.writeUInt32LE(seq, 4);\n    hdr.writeUInt32LE(0, 8);\n    hdr.writeUInt32LE(0, 12);\n\n    const buf = Buffer.concat([hdr, data]);\n    this.check(await this.command(this.ESP_FLASH_DATA, buf, this._checksum(data), 5000, 1));\n  }\n\n  async flash_finish(reboot = false): Promise<void> {\n    const data = Buffer.alloc(4);\n    data.writeUInt32LE(reboot ? 0 : 1, 0);\n    this.check(await this.command(this.ESP_FLASH_END, data));\n  }\n\n  _pad_image(data: Buffer, alignment: number, pad_character = 0xFF): Buffer {\n    const pad_mod = data.length % alignment;\n    if (pad_mod != 0) {\n      data = Buffer.concat([data, Buffer.alloc(pad_mod, pad_character)]);\n    }\n    return data;\n  }\n\n  _parse_flash_size_arg(arg: string): number {\n    if (this.FLASH_SIZES[arg]) {\n      return this.FLASH_SIZES[arg];\n    } else {\n      const sizes = Object.keys(this.FLASH_SIZES).join(', ');\n      throw new Error(`Flash size '${arg}' is not supported by this chip type. Supported sizes: ${sizes}`);\n    }\n  }\n\n  async run_stub(): Promise<ESPLoader> {\n    const stub = this.STUB_CODE as unknown as Record<string, string | number>;\n\n    console.log('Uploading stub...');\n    for (const field of ['text', 'data']) {\n      if (!stub[field]) continue;\n      const offs = stub[`${field}_start`] as number;\n      const code = await unzipAsync(Buffer.from(stub[field] as string, 'base64'));\n      const blocks = Math.floor((code.length + this.ESP_RAM_BLOCK - 1) / this.ESP_RAM_BLOCK);\n      await this.mem_begin(code.length, blocks, this.ESP_RAM_BLOCK, offs);\n      for (let seq = 0; seq < blocks; seq++) {\n        const from_offs = seq * this.ESP_RAM_BLOCK;\n        const to_offs = from_offs + this.ESP_RAM_BLOCK;\n        await this.mem_block(code.slice(from_offs, to_offs), seq);\n      }\n    }\n\n    console.log('Running stub...');\n    await this.mem_finish(stub['entry'] as number);\n    await sleep(500);\n\n    console.log('Stub running...');\n    return new this.STUB_CLASS!(this.port);\n  }\n\n  async change_baud(baud: number): Promise<void> {\n    console.log(`Changing baud rate to ${baud}`);\n    const data = Buffer.alloc(8);\n    data.writeUInt32LE(baud, 0);\n    data.writeUInt32LE(this.IS_STUB ? this.port.baudRate : 0, 4);  // stub takes the new baud rate and the old one\n    await this.command(this.ESP_CHANGE_BAUDRATE, data);\n    console.log('Changed.');\n    await update(this.port, { baudRate: baud });\n    await sleep(50);  // get rid of crap sent during baud rate change\n  }\n\n  _update_image_flash_params(address: number, args: IFlashArgs, image: Buffer): Buffer {\n    if (address != this.BOOTLOADER_FLASH_OFFSET) {\n      return image;  // not flashing bootloader offset, so don't modify this\n    }\n\n    const magic = image[0];\n    let flash_mode = image[2];\n    let flash_freq = image[3] & 0x0F;\n    let flash_size = image[3] & 0xF0;\n\n    if (magic != this.ESP_IMAGE_MAGIC) {\n      console.warn(`Warning: Image file at ${address} doesn't look like an image file, so not changing any flash settings.`);\n      return image;\n    }\n\n    // TODO: verify bootloader image\n\n    if (args.flashMode && args.flashMode != 'keep') {\n      flash_mode = { 'qio': 0, 'qout': 1, 'dio': 2, 'dout': 3 }[args.flashMode]!;\n    }\n\n    if (args.flashFreq && args.flashFreq != 'keep') {\n      flash_freq = { '40m': 0, '26m': 1, '20m': 2, '80m': 0xf }[args.flashFreq]!;\n    }\n\n    if (args.flashSize && args.flashSize != 'keep') {\n      flash_size = this._parse_flash_size_arg(args.flashSize);\n    }\n\n    image[2] = flash_mode;\n    image[3] = flash_freq | flash_size;\n\n    return image;\n  }\n\n  async flash(args: IFlashArgs, onProgress: (progress: IFlashProgress) => void): Promise<void> {\n    for (let i = 0; i < args.partitions.length; i++) {\n      const { address } = args.partitions[i];\n      let { image } = args.partitions[i];\n      console.log(`Part ${i}: address=${hex(address, 4)} size=${image.length}`);\n\n      image = this._pad_image(image, 4);\n      if (image.length == 0) {\n        console.warn(`Skipped empty part ${i} address=${hex(address, 4)}`);\n        continue;\n      }\n\n      image = this._update_image_flash_params(address, args, image);\n\n      const blocks = await this.flash_begin(image.length, address);\n\n      let seq = 0;\n      let written = 0;\n      while (image.length > 0) {\n        console.log(`Writing at ${hex(address + seq * this.FLASH_WRITE_SIZE, 4)}... (${Math.round((seq + 1) / blocks * 100)}%)`);\n        const block = image.slice(0, this.FLASH_WRITE_SIZE);\n        await this.flash_block(block, seq);\n        image = image.slice(this.FLASH_WRITE_SIZE);\n        seq += 1\n        written += block.length;\n        onProgress({ index: i, blocks_written: seq + 1, blocks_total: blocks });\n      }\n\n      if (this.IS_STUB) {\n        // Stub only writes each block to flash after 'ack'ing the receive, so do a final dummy operation which will\n        // not be 'ack'ed until the last block has actually been written out to flash\n        await this.read_reg(ESPLoader.CHIP_DETECT_MAGIC_REG_ADDR);\n      }\n\n      console.log(`Wrote ${written} bytes`);\n    }\n\n    console.log('Leaving...');\n\n    if (this.IS_STUB) {\n      // skip sending flash_finish to ROM loader here,\n      // as it causes the loader to exit and run user code\n      await this.flash_begin(0, 0);\n      await this.flash_finish(false);\n    }\n  }\n\n  async hard_reset(): Promise<void> {\n    await set(this.port, { dtr: true, rts: false });  // EN->LOW\n    await sleep(100);\n    await set(this.port, { dtr: false, rts: false });\n  }\n\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"app\"}},[_c('h1',[_vm._v(\"Web ESPTool\")]),_c('div',{staticClass:\"author\"},[_vm._v(\"by XiNGRZ\")]),(_vm.progress == null)?_c('div',{staticClass:\"main upload\"},[_c('a-upload-dragger',{staticClass:\"uploader\",attrs:{\"accept\":\".zip\",\"showUploadList\":false,\"customRequest\":function (ref) {\n\tvar file = ref.file;\n\n\treturn _vm.handleFile(file);\n}}},[_c('p',{staticClass:\"ant-upload-drag-icon\"},[_c('a-icon',{attrs:{\"type\":_vm.file ? 'file-zip' : 'inbox'}})],1),(_vm.file)?_c('p',{staticClass:\"ant-upload-text file\"},[_vm._v(_vm._s(_vm.file.name))]):_c('p',{staticClass:\"ant-upload-text\"},[_vm._v(\"\")])])],1):_vm._e(),(_vm.progress != null)?_c('div',{staticClass:\"main progress\"},[_c('a-progress',{attrs:{\"type\":\"circle\",\"width\":150,\"strokeWidth\":4,\"percent\":_vm.progress,\"status\":_vm.progress >= 100 ? 'success' : 'active',\"format\":_vm.formatProgress}})],1):_vm._e(),_c('div',{staticClass:\"buttons\"},[_c('a-button',{attrs:{\"size\":\"large\",\"type\":\"primary\",\"disabled\":_vm.busy || !_vm.file},on:{\"click\":_vm.start}},[_vm._v(\"\")])],1)]),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"footer\"},[_c('div',[_vm._v(\"Copyright  2021 XiNGRZ\")]),_c('div',[_c('a',{attrs:{\"href\":\"https://github.com/xingrz/web-esptool\"}},[_vm._v(\"Fork me on GitHub\")])])])}]\n\nexport { render, staticRenderFns }","import { IStub } from '../ESPLoader';\n\nexport default {\n  'text': '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',\n  'text_start': 1074847744,\n  'entry': 1074847748,\n  'data': 'eNqN0btKw1AYwPFzcmmSJrWnOrTioOLooriIRXqKj6AP4GV0cHAVoTg6Kx0LPoMPILr5CurioPWCd4tL8R9zQkNE8IMfJ4d8l3MSv9VvuK4jLNsTth2Kgxulz/GF9q3SzZ7SfdaVrtKdbrJfv1P6Cp37ZB+bf0jW6pPSl6g9D94dm+f2i9KLr0rvvCldf1c6+hjkpBY+k3UGW49KbzJ7l7x95l2Y+WfkhL3ftXkWNQ0cUi+FEBZsOHDhIUAJFYxiErNoYg0tnEDSoAVJE0kTSRNZgI8ICjVMYAYaq+LPkIaVOVd6tvR8sYLhGb4RGEUjNCKjZKSRvXch0yvI1Mf5ZfMtRlDFGMYxhWnMoY4lLGMD29jDEU5xHd9Jin+HzLFy7Bwnx83JhqoMC98LCkU3dCK7ZA3J8s+/lKb2G1frZkY=',\n  'data_start': 1073720488,\n} as IStub;\n","import ESPLoader from './ESPLoader';\nimport ESP8266Stub from './stubs/ESP8266Stub';\n\nexport default class ESP8266ROM extends ESPLoader {\n\n  static CHIP_DETECT_MAGIC_VALUE = 0xfff0c101;\n\n  CHIP_NAME = 'ESP8266';\n  IS_STUB = false;\n\n  FLASH_SIZES = {\n    '512KB': 0x00,\n    '256KB': 0x10,\n    '1MB': 0x20,\n    '2MB': 0x30,\n    '4MB': 0x40,\n    '2MB-c1': 0x50,\n    '4MB-c1': 0x60,\n    '8MB': 0x80,\n    '16MB': 0x90,\n  };\n\n  BOOTLOADER_FLASH_OFFSET = 0;\n\n  STUB_CLASS = ESP8266StubLoader;\n  STUB_CODE = ESP8266Stub;\n\n  async get_efuses(): Promise<number[]> {\n    return [\n      await this.read_reg(0x3ff00050),\n      await this.read_reg(0x3ff00054),\n      await this.read_reg(0x3ff00058),\n      await this.read_reg(0x3ff0005c),\n    ];\n  }\n\n  _get_flash_size(efuses: number[]): number {\n    const r0_4 = efuses[0] & (1 << 4);\n    const r3_25 = efuses[3] & (1 << 25);\n    const r3_26 = efuses[3] & (1 << 26);\n    const r3_27 = efuses[3] & (1 << 27);\n\n    if (r0_4 && !r3_25) {\n      if (!r3_27 && !r3_26) {\n        return 1;\n      } else if (!r3_27 && r3_26) {\n        return 2;\n      }\n    }\n    if (!r0_4 && r3_25) {\n      if (!r3_27 && !r3_26) {\n        return 2;\n      } else if (!r3_27 && r3_26) {\n        return 4;\n      }\n    }\n    return -1;\n  }\n\n  async get_chip_description(): Promise<string> {\n    const efuses = await this.get_efuses();\n    if ((efuses[0] & (1 << 4)) || (efuses[2] & (1 << 16))) {\n      const flash_size = this._get_flash_size(efuses);\n      const max_temp = efuses[0] & (1 << 5);\n      const chip_name = {\n        1: max_temp ? 'ESP8285H08' : 'ESP8285N08',\n        2: max_temp ? 'ESP8285H16' : 'ESP8285N16',\n      }[flash_size] || 'ESP8285';\n      return chip_name;\n    } else {\n      return 'ESP8266EX';\n    }\n  }\n\n  get_erase_size(offset: number, size: number): number {\n    const sectors_per_block = 16;\n    const sector_size = this.FLASH_SECTOR_SIZE;\n    const num_sectors = Math.floor((size + sector_size - 1) / sector_size);\n    const start_sector = Math.floor(offset / sector_size);\n\n    let head_sectors = sectors_per_block - (start_sector % sectors_per_block);\n    if (num_sectors < head_sectors) {\n      head_sectors = num_sectors;\n    }\n\n    if (num_sectors < 2 * head_sectors) {\n      return Math.floor((num_sectors + 1) / 2) * sector_size;\n    } else {\n      return (num_sectors - head_sectors) * sector_size;\n    }\n  }\n\n  async flash_spi_attach(): Promise<void> {\n    await this.flash_begin(0, 0);\n  }\n\n}\n\nclass ESP8266StubLoader extends ESP8266ROM {\n\n  FLASH_WRITE_SIZE = 0x4000;  // matches MAX_WRITE_BLOCK in stub_loader.c\n  IS_STUB = true;\n\n  get_erase_size(offset: number, size: number): number {\n    return size;  // stub doesn't have same size bug as ROM loader\n  }\n\n}\n","import EventEmitter from 'events';\nimport type { BaseBinding } from 'serialport';\nimport SerialPort from '@serialport/stream';\nimport WSABinding from 'serialport-binding-webserialapi';\n\nimport ESPLoader from './ESPLoader';\nimport ESP8266ROM from './ESP8266ROM';\nimport ESP32ROM from './ESP32ROM';\n\nimport { open, closeGracefully } from './utils/serial';\nimport sleep from './utils/sleep';\nimport { IFlashArgs, IConnectEvent } from './';\n\nSerialPort.Binding = WSABinding as unknown as BaseBinding;\n\nexport default class ESPTool extends EventEmitter {\n\n  serial: SerialPort | null = null;\n  loader: ESPLoader | null = null;\n\n  async open(path: string): Promise<void> {\n    if (this.serial && this.serial.isOpen) {\n      await closeGracefully(this.serial);\n      this.serial = null;\n      await sleep(200);\n    }\n\n    this.serial = new SerialPort(path, {\n      baudRate: 115200,\n      autoOpen: false,\n    });\n\n    try {\n      await open(this.serial);\n\n      const detector = new ESPLoader(this.serial);\n      await detector.connect();\n      const chip_magic_value = await detector.read_reg(ESPLoader.CHIP_DETECT_MAGIC_REG_ADDR);\n      for (const cls of [ESP8266ROM, ESP32ROM]) {\n        if (chip_magic_value == cls.CHIP_DETECT_MAGIC_VALUE) {\n          this.loader = new cls(this.serial);\n        }\n      }\n      detector.release();\n\n      if (!this.loader) {\n        console.warn('Unsupported chip');\n        closeGracefully(this.serial);\n        this.serial = null;\n        return;\n      }\n\n      this.serial.once('close', () => {\n        console.log('Connection closed');\n        this.emit('disconnect');\n      });\n\n      const chip_description = await this.loader.get_chip_description();\n      console.log(`Detected ${chip_description}`);\n      this.emit('connect', { chip_description } as IConnectEvent);\n\n      if (this.loader.STUB_CODE) {\n        const stub = await this.loader.run_stub();\n        this.loader.release();\n        this.loader = stub;\n      }\n\n      await this.loader?.flash_spi_attach(0);\n    } catch (e) {\n      console.warn('Failed getting chip model', e);\n      if (this.serial && this.serial.isOpen) {\n        closeGracefully(this.serial);\n      }\n      this.serial = null;\n      throw e;\n    }\n  }\n\n  async flash(args: IFlashArgs): Promise<void> {\n    await this.loader?.flash(args, (progress) => this.emit('progress', progress));\n    await this.loader?.hard_reset();\n  }\n\n}\n","import ESPTool from './ESPTool';\nexport default ESPTool;\n\nexport interface IFlashArgs {\n  flashMode?: IFlashMode;\n  flashFreq?: IFlashFreq;\n  flashSize?: IFlashSize;\n  partitions: {\n    address: number;\n    image: Buffer;\n  }[];\n}\n\nexport type IFlashMode = 'keep' | 'qio' | 'qout' | 'dio' | 'dout';\nexport type IFlashFreq = 'keep' | string;\nexport type IFlashSize = 'keep' | string;\n\nexport interface IConnectEvent {\n  chip_description: string;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\n\nimport unpack from \"./unpack\";\nimport ESPTool, { IConnectEvent, IFlashArgs } from \"./esptool\";\nimport WSABinding from \"serialport-binding-webserialapi\";\n\nconst MAX_FILE_SIZE = 16 * 1024 * 1024;\n\nfunction hackWSABinding() {\n  // Hack WSABinding to force it to refresh ports\n  // after the current port is closed\n  // @ts-ignore\n  navigator.serial.getPorts = async () => [];\n  // @ts-ignore\n  WSABinding.internalBasePortsList = [];\n}\n\n@Component\nexport default class App extends Vue {\n  file: File | null = null;\n  progress: number | null = null;\n  imageSizes: number[] = [];\n  imageSizesTotal = 0;\n  busy = false;\n\n  flashArgs?: IFlashArgs;\n  esp?: ESPTool;\n\n  mounted(): void {\n    hackWSABinding();\n    this.esp = new ESPTool();\n\n    this.esp.on(\"connect\", ({ chip_description }: IConnectEvent) => {\n      console.log(`Connected: ${chip_description}`);\n      this.$message.success(`${chip_description}`);\n    });\n\n    this.esp.on(\"disconnect\", () => {\n      console.log(\"Disconnected\");\n    });\n\n    this.esp.on(\"progress\", ({ index, blocks_written, blocks_total }) => {\n      let success = 0;\n      for (let i = 0; i < index; i++) {\n        success += this.imageSizes[i];\n      }\n      const progress =\n        success + this.imageSizes[index] * (blocks_written / blocks_total);\n      this.progress = (progress / this.imageSizesTotal) * 100;\n    });\n  }\n\n  async handleFile(file: File): Promise<void> {\n    if (file.size >= MAX_FILE_SIZE) {\n      this.$message.error(\n        `: ${Math.round(file.size / 1024 / 1024)} MB`\n      );\n      return;\n    }\n\n    const flashArgs = await unpack(file);\n    if (flashArgs == null) {\n      this.$message.error(\"\");\n      return;\n    }\n\n    this.file = file;\n    this.flashArgs = flashArgs;\n\n    this.imageSizes = flashArgs.partitions.map(({ image }) => image.length);\n    this.imageSizesTotal = this.imageSizes.reduce(\n      (total, size) => total + size,\n      0\n    );\n  }\n\n  async start(): Promise<void> {\n    this.busy = true;\n    this.progress = 0;\n    try {\n      await this.esp?.open(\"wsa://default\");\n    } catch (e) {\n      this.$message.error(\"\");\n      this.busy = false;\n      return;\n    }\n    try {\n      await this.esp?.flash(this.flashArgs!);\n    } catch (e) {\n      console.error(e);\n      this.$message.error(\"\");\n    }\n    console.log(\"done\");\n    this.busy = false;\n  }\n\n  formatProgress(): string {\n    return this.progress! >= 100 ? \"\" : `${Math.floor(this.progress!)}%`;\n  }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=78d104f4&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport Antd from 'ant-design-vue';\nimport 'ant-design-vue/dist/antd.css';\n\nimport App from './App.vue';\n\nVue.config.productionTip = false\n\nVue.use(Antd);\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app');\n","import { IStub } from '../ESPLoader';\n\nexport default {\n  'text': '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',\n  'text_start': 1074520064,\n  'entry': 1074521496,\n  'data': 'eNrjOPDHHgAEmwIE',\n  'data_start': 1073605544,\n} as IStub;\n","export default function pack(data: Buffer): Buffer {\n  const out = Buffer.alloc(data.length * 2 + 2);\n  out[0] = 0xC0;\n  let oi = 1;\n  for (let di = 0; di < data.length; di++) {\n    if (data[di] == 0xC0) {\n      out[oi] = 0xDB;\n      out[oi + 1] = 0xDC;\n      oi += 2;\n    } else if (data[di] == 0xDB) {\n      out[oi] = 0xDB;\n      out[oi + 1] = 0xDD;\n      oi += 2;\n    } else {\n      out[oi] = data[di];\n      oi += 1;\n    }\n  }\n  out[oi] = 0xC0;\n  return out.slice(0, oi + 1);\n}\n","import unzip from './unzip';\nimport { IFlashArgs, IFlashMode } from '@/esptool';\n\nexport default async function unpack(file: File): Promise<IFlashArgs | null> {\n  const entries = await unzip(file);\n\n  const { dir, content } = findFlashArgs(entries) || {};\n  if (!content) {\n    return null;\n  }\n\n  const args = Buffer.from(content)\n    .toString()\n    .replace(/\\n/g, ' ')\n    .split(' ')\n    .map(i => i.trim())\n    .filter(i => !!i);\n\n  const flashArgs: IFlashArgs = {\n    flashMode: 'qio',\n    partitions: [],\n  };\n\n  for (let i = 0; i < args.length - 1; i++) {\n    if (args[i] == '--flash_mode') {\n      flashArgs.flashMode = args[i + 1] as IFlashMode;\n    } else if (args[i].match(/^0x([A-Fa-f0-9]+)$/)) {\n      const address = parseInt(RegExp.$1, 16);\n      const key = `${dir}/${args[i + 1]}`;\n      if (entries[key]) {\n        flashArgs.partitions.push({ address, image: entries[key] });\n      }\n    } else if (args[i].match(/^([0-9]+)$/)) {\n      const address = parseInt(RegExp.$1);\n      const key = `${dir}/${args[i + 1]}`;\n      if (entries[key]) {\n        flashArgs.partitions.push({ address, image: entries[key] });\n      }\n    }\n  }\n\n  return flashArgs;\n}\n\nfunction findFlashArgs(entries: Record<string, Buffer>): { dir: string, content: Buffer } | null {\n  for (const name in entries) {\n    if (name.match(/^(.*)\\/flash_args$/)) {\n      return {\n        dir: RegExp.$1,\n        content: entries[name],\n      };\n    }\n  }\n  return null;\n}\n"],"sourceRoot":""}